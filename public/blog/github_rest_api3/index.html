<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>R packages</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This is meta description">
  <meta name="author" content="Danny J. Rasch">
  <meta name="generator" content="Hugo 0.68.0" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="/plugins/Ionicons/css/ionicons.min.css">
  
  <link rel="stylesheet" href="/plugins/magnific-popup/magnific-popup.css">
  
  <link rel="stylesheet" href="/plugins/slick/slick.css">
  
  <link rel="stylesheet" href="/plugins/smartslider3/css/normalize.min.css">
  
  <link rel="stylesheet" href="/plugins/smartslider3/css/smartslider.min.css">
  
  <link rel="stylesheet" href="/plugins/smartslider3/css/litebox.min.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <link rel="icon" href="/images/favicon.png" type="image/x-icon">









</head><body>
<header class="navigation">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        
        <nav class="navbar">
          
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
              <img src="/images/logo2-200x50.png" alt="Danny J.Rasch | Data &amp; AI Consultant" class="img-responsive">
            </a>
          </div>
          
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/">Home</a></li>

              
              
              <li><a href="/blog">Blog</a></li>
              
              
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                  aria-expanded="false">Pages <span class="ion-ios-arrow-down"></span></a>
                <ul class="dropdown-menu">
                  
                  <li><a href="/map">Map</a></li>
                  
                </ul>
              </li>
              
              
              
              <li><a href="/contact">Contact</a></li>
              
              

              

            </ul>
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>

<section class="page-title bg-2" style="background-image: url('/');">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="block">
          <h1>R packages</h1>
          <p></p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="page-wrapper">
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<div class="post post-single">
					<h2 class="post-title">R packages</h2>
					<div class="post-meta">
						<ul>
              <li><i class="ion-calendar"></i> June 15, 2018</li>
              <li><i class="ion-android-people"></i> Posted By <a class="text-primary" href="/author/dannyjra">DannyJRa</a></li>
              <li><i class="ion-pricetags"></i> 
                
                <a href="/tags/set-up">Set up</a>
								
              </li>
            </ul>
					</div>
					<div class="post-thumb">
						<img class="img-responsive" src="/images/blog/04_R_packages_BLOG.jpg" alt="R packages">
					</div>
					<div class="post-content post-excerpt">
						<p>Original post here: /home/danny/OneDrive/DataScience/41_DannyJRa.github.io/04_R_Packages/01_blog_caret_Tut.html</p>
<p>Add summary desdcription of blog</p>
<h1 id="favorite-packages">Favorite packages</h1>
<p>Here are my go-to R packages &ndash; in a handy searchable table.
One of the great things about R is the thousands of packages users have written to solve specific problems in various disciplines &ndash; analyzing everything from weather or financial data to the human genome &ndash; not to mention analyzing computer security-breach data.</p>
<p>Some tasks are common to almost all users, though, regardless of subject area: data import, data wrangling and data visualization. The table below show my favorite go-to packages for one of these three tasks (plus a few miscellaneous ones tossed in). The package names in the table are clickable if you want more information.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(openxlsx)
favorites <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.xlsx</span>(xlsxFile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Packages_favorite.xlsx&#34;</span>, sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, skipEmptyRows <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(DT)
<span style="color:#a6e22e">datatable</span>(favorites)
</code></pre></div><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="save-and-install-packages">Save and install packages</h1>
<h2 id="save-packages">Save packages</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">##########################################################333</span>

<span style="color:#75715e">### 64bit Version of Java needed</span>
<span style="color:#75715e">#library(XLConnect)</span>
<span style="color:#75715e">########################################################</span>

<span style="color:#75715e">############3</span>
<span style="color:#75715e">#shell(&#34;zip&#34;)</span>
<span style="color:#75715e">#ZIP needed</span>
<span style="color:#75715e">#library(openxlsx)</span>
<span style="color:#75715e">#path=&#34;C:/Program Files/7-Zip/7z.exe&#34;</span>
<span style="color:#75715e">#Sys.setenv(&#34;R_ZIPCMD&#34; = path)</span>
<span style="color:#75715e">#Sys.setenv(&#34;R_ZIPCMD&#34;=&#34;C:/RBuildTools/3.4/bin/zip.exe&#34;)</span>

<span style="color:#75715e">###########</span>



ip <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.data.frame</span>(<span style="color:#a6e22e">installed.packages</span>()[,<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span><span style="color:#f92672">:</span><span style="color:#ae81ff">4</span>)])
<span style="color:#a6e22e">rownames</span>(ip) <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">NULL</span>
ip <span style="color:#f92672">&lt;-</span> ip<span style="color:#a6e22e">[is.na</span>(ip<span style="color:#f92672">$</span>Priority),<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,drop<span style="color:#f92672">=</span><span style="color:#66d9ef">FALSE</span>]
<span style="color:#75715e">#print(ip, row.names=FALSE)</span>

<span style="color:#75715e">### No need of java</span>
<span style="color:#a6e22e">library</span>(openxlsx)

<span style="color:#75715e">#wb=read.xlsx(xlsxFile=&#34;Packages.xlsx&#34;)</span>
<span style="color:#75715e">#wb &lt;- createWorkbook()</span>

<span style="color:#75715e">#addWorksheet(wb, &#34;Packages&#34;)</span>
<span style="color:#75715e">#writeData(wb, &#34;Packages&#34;, ip, startCol = 2, startRow = 3, rowNames = TRUE)</span>

<span style="color:#75715e">###########</span>

<span style="color:#a6e22e">write.xlsx</span>(ip, <span style="color:#e6db74">&#34;Packages_installed.xlsx&#34;</span>, asTable <span style="color:#f92672">=</span> T)
</code></pre></div><pre><code>## Note: zip::zip() is deprecated, please use zip::zipr() instead
</code></pre><h2 id="install-packages-on-new-machine">Install packages on new machine</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">### No need of java</span>
<span style="color:#a6e22e">library</span>(openxlsx)

ip <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.xlsx</span>(xlsxFile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Packages_installed.xlsx&#34;</span>, sheet <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, skipEmptyRows <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)

packages<span style="color:#f92672">=</span><span style="color:#a6e22e">as.character</span>(ip[,<span style="color:#ae81ff">1</span>])
<span style="color:#75715e">#packages=c(&#34;ggplot2&#34;)</span>

packages<span style="color:#f92672">&lt;-</span>packages[1<span style="color:#f92672">:</span><span style="color:#ae81ff">100</span>]
<span style="color:#75715e">#install.packages(packages)</span>
</code></pre></div><h1 id="speeding-up-package-installation">Speeding up package installation</h1>
<p>A simple one line tweak can significantly speed up package installation and updates.</p>
<h2 id="the-wonder-of-cran">The wonder of CRAN</h2>
<p>One of the best features of R is CRAN. When a package is submitted to CRAN, not only is it checked under three versions of R
• R-past, R-release and R-devel
but also three different operating systems
• Windows, Linux and Mac (with multiple flavours of each)
CRAN also checks that the updated package doesn’t break existing packages. This last part is particularly tricky when you consider all the dependencies a package like ggplot2 or Rcpp have. Furthermore, it performs all these checks within 24 hours, ready for the next set packages.
What many people don’t realise is that for CRAN to perform this miracle of package checking, it builds and checks these packages in parallel; so rather than installing a single package at a time, it checks multiple packages at once. Obviously some care has to be taken when checking/installing packages due to the connectivity between packages, but R takes care of these details.</p>
<h2 id="parallel-package-installation-ncpus">Parallel package installation: Ncpus</h2>
<p>If you examine the help package of ?install.packages, there’s a sneaky argument called Ncpus. From the help page:
Ncpus: The number of parallel processes to use for a parallel install of more than one source package.
The default value of this argument is
Ncpus = getOption(‘Ncpus’, 1L)
The getOption() part determines if the value has been set in options(). If no value is found, the default number of processes to use is 1. If you haven’t heard of Ncpus, it’s almost certainly 1, but you can check using</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">getOption</span>(<span style="color:#e6db74">&#34;Ncpus&#34;</span>, <span style="color:#ae81ff">1L</span>)
</code></pre></div><pre><code>## [1] 1
</code></pre><p>How many cores can be utilized:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">cores <span style="color:#f92672">=</span> parallel<span style="color:#f92672">::</span><span style="color:#a6e22e">detectCores</span>()
</code></pre></div><p>My machine has eight cores 2. So it doesn’t make sense to set Ncpus above 2.</p>
<p>Set cores and install selected packages</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">options</span>(Ncpus <span style="color:#f92672">=</span> cores)
<span style="color:#a6e22e">system.time</span>(<span style="color:#a6e22e">install.packages</span>(packages))
</code></pre></div><p>So setting Ncpus to 2 allows us to half the installation time from 409 seconds to around 224 (seconds). Increasing Ncpus to 4 gives a further speed boost. Due to the dependencies between packages, we’ll never achieve a perfect speed-up, e.g. if package X depends on Y, then we have to install X first. However, for a simple change we get an easy speed boost.
Furthermore, setting Ncpus gives a speed boost when updating packages via update.packages().</p>
<p>A permanent change: .Rprofile
Clearly writing options(Ncpus = 6) before you install a package is a pain. However, you can just add it to your .Rprofile file.</p>
<p>Maybe it is also helpful not to utilize all available cores. This allows packages to be installed in parallel, while giving me a little bit of wiggle room to check email and listen to music.</p>
					</div>
					<div class="post-comments">
						
					</div>
				</div>
			</div>
      <div class="col-md-4">
        <aside class="sidebar">
  
  <div class="widget widget-latest-post">
    <h4 class="widget-title">Latest Posts</h4>
    
    <div class="media">
      <a class="pull-left" href="/blog/blog-post-1/">
        <img class="media-object" src="/images/blog/blog-post-1.jpg" alt="How To Wear Bright Shoes">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><a href="/blog/blog-post-1/">How To Wear Bright Shoes</a></h4>
        <p>Lorem ipsum dolor sit amet, consectetur …</p>
      </div>
    </div>
    
    <div class="media">
      <a class="pull-left" href="/blog/blog-post-2/">
        <img class="media-object" src="/images/blog/blog-post-2.jpg" alt="How To Wear Bright Shoes">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><a href="/blog/blog-post-2/">How To Wear Bright Shoes</a></h4>
        <p>Lorem ipsum dolor sit amet, consectetur …</p>
      </div>
    </div>
    
    <div class="media">
      <a class="pull-left" href="/blog/blog-post-3/">
        <img class="media-object" src="/images/blog/blog-post-3.jpg" alt="How To Wear Bright Shoes">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><a href="/blog/blog-post-3/">How To Wear Bright Shoes</a></h4>
        <p>Lorem ipsum dolor sit amet, consectetur …</p>
      </div>
    </div>
    
    <div class="media">
      <a class="pull-left" href="/blog/blog-post-4/">
        <img class="media-object" src="/images/blog/blog-post-4.jpg" alt="How To Wear Bright Shoes">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><a href="/blog/blog-post-4/">How To Wear Bright Shoes</a></h4>
        <p>Lorem ipsum dolor sit amet, consectetur …</p>
      </div>
    </div>
    
  </div>
  

  
  <div class="widget widget-category">
    <h4 class="widget-title">Categories</h4>
    <ul class="widget-category-list">
      <li><a href="/categories/artificial-intelligence">Artificial intelligence</a></li>
      <li><a href="/categories/cloud">Cloud</a></li>
      <li><a href="/categories/company-news">Company news</a></li>
      <li><a href="/categories/legacy-support">Legacy support</a></li>
      <li><a href="/categories/python">Python</a></li>
      <li><a href="/categories/r">R</a></li>
    </ul>
  </div> 

  
  <div class="widget widget-tag">
    <h4 class="widget-title">Tags</h4>
    <ul class="widget-tag-list">
      <li><a href="/tags/advice">Advice</a></li>
      <li><a href="/tags/ai">Ai</a></li>
      <li><a href="/tags/android">Android</a></li>
      <li><a href="/tags/api">Api</a></li>
      <li><a href="/tags/azure">Azure</a></li>
      <li><a href="/tags/bigdata">Bigdata</a></li>
      <li><a href="/tags/django">Django</a></li>
      <li><a href="/tags/docker">Docker</a></li>
      <li><a href="/tags/engineering">Engineering</a></li>
      <li><a href="/tags/flask">Flask</a></li>
      <li><a href="/tags/gcp">Gcp</a></li>
      <li><a href="/tags/linux">Linux</a></li>
      <li><a href="/tags/mechine">Mechine</a></li>
      <li><a href="/tags/ml">Ml</a></li>
      <li><a href="/tags/ops">Ops</a></li>
      <li><a href="/tags/r-package">R package</a></li>
      <li><a href="/tags/retro">Retro</a></li>
      <li><a href="/tags/rstudio">Rstudio</a></li>
      <li><a href="/tags/set-up">Set up</a></li>
      <li><a href="/tags/shiny">Shiny</a></li>
      <li><a href="/tags/technology">Technology</a></li>
      <li><a href="/tags/viz">Viz</a></li>
      <li><a href="/tags/webdev">Webdev</a></li>
    </ul>
  </div> 


  <div class="widget widget-tag"><h3>Last 5 GitHub Commits for this blog</h3>
    <ul>
      
      
          <li>
            <a href="https://github.com/DannyJRa/DannyJRa.github.io/commit/e9bc3c08ab40cb096070aa8481eb145727e59094" target="_blank">
                2020-09-14T23:06:48Z<br>
                commit blog 96
            </a>
          </li>
      
          <li>
            <a href="https://github.com/DannyJRa/DannyJRa.github.io/commit/814a3430690525a88b3007531bf292e18cdfdb29" target="_blank">
                2020-08-21T13:47:43Z<br>
                drawio test
            </a>
          </li>
      
          <li>
            <a href="https://github.com/DannyJRa/DannyJRa.github.io/commit/263223c26374ad95298d0722489c88437f8b89fc" target="_blank">
                2020-08-15T10:11:34Z<br>
                terrform hello world
            </a>
          </li>
      
          <li>
            <a href="https://github.com/DannyJRa/DannyJRa.github.io/commit/87f3f312a65eed0617a9f352b4161b2685df0a58" target="_blank">
                2020-08-10T21:57:03Z<br>
                updated blog
            </a>
          </li>
      
          <li>
            <a href="https://github.com/DannyJRa/DannyJRa.github.io/commit/6991cbc719b89b07e887157438df87616073b9c2" target="_blank">
                2020-08-09T15:42:16Z<br>
                105 Vault hellow world
            </a>
          </li>
      
    </ul>
  </div>


</aside>
      </div>
		</div>
	</div>
</section>

<footer class="footer">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="footer-manu">
					<ul>
            
            <li><a href="/blog">Blog</a></li>
            
            <li><a href="/contact">Contact</a></li>
            
					</ul>
				</div>
				<p class="copyright">Copyright © 2020 <a href="https://dannyrasch.com">DJR</a> All Rights Reserved</p>
			</div>
		</div>
	</div>
</footer>



<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5phCl-eIY5jK0YjnnA-Tq-FjkLH0kETU&amp;libraries=places"></script>




<script src="/plugins/jQuery/jquery.min.js"></script>

<script src="/plugins/bootstrap/bootstrap.min.js"></script>

<script src="/plugins/slick/slick.min.js"></script>

<script src="/plugins/magnific-popup/jquery.magnific-popup.min.js"></script>

<script src="/plugins/shuffle/shuffle.min.js"></script>

<script src="/plugins/google-map/gmap.js"></script>

<script src="/plugins/smartslider3/js/GsapMorphSVGPlugin.min.js"></script>

<script src="/plugins/smartslider3/js/n2-j.min.js"></script>

<script src="/plugins/smartslider3/js/nextend-frontend.min.js"></script>

<script src="/plugins/smartslider3/js/nextend-gsap.min.js"></script>

<script src="/plugins/smartslider3/js/nextend-webfontloader.min.js"></script>

<script src="/plugins/smartslider3/js/smartslider-block-type-frontend.min.js"></script>

<script src="/plugins/smartslider3/js/smartslider-frontend.min.js"></script>

<script src="/plugins/smartslider3/js/smartslider-simple-type-frontend.min.js"></script>

<script src="/plugins/smartslider3/js/litebox.min.js"></script>




<script src="/js/script.min.js"></script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-118560225-1', 'auto');
  ga('send', 'pageview');
</script>
</body>

</html>